<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
<link rel="icon" href="favicon.ico" sizes="any">
<title>Athlete Combine Dashboard</title>
<!-- Libraries (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<link rel="stylesheet" href="styles.css?v=1.0.123c">
<style>
  /* Athlete list header sort affordance (safe, local-only) */
  .thSort:hover { opacity: .92; }
  .thSort:focus { outline: none; }
</style>
</head>
<body>
<header>
<div class="wrap title"><div class="titleBar">
<div>
<h1>Athlete Combine Dashboard <span class="small muted" style="font-weight:700;margin-left:8px">v1.0.123</span><span class="pill pillPublic" id="publicPill" style="display:none;margin-left:8px">Public</span><span class="pill pillPro" id="proPill" style="display:none;margin-left:6px">Pro</span><span class="pill pillMedia" id="mediaPill" style="display:none;margin-left:6px">Media</span><span class="pill pillAdmin" id="adminPill" style="display:none;margin-left:6px">Admin</span></h1>
<div class="sub">Load your CSV → browse athletes → click an athlete to view best attempts, percentiles, and charts.</div>
</div><div class="topRightControls"><button class="linkBtn btnIcon" id="loadDefault" type="button"><svg aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M4 4v6h6M20 20v-6h-6M20 8a8 8 0 00-14.9-2M4 16a8 8 0 0014.9 2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg><span>Refresh</span></button><button class="linkBtn btnIcon" id="presentBtn" type="button" title="Open Presentation Mode">
<svg aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17.5h4.5M12 17.5V20M4 4h16v11H4V4z"></path>
</svg><span>Present</span></button><button class="btn linkBtn btnIcon" id="githubBtn" title="Open project" type="button">
<svg aria-hidden="true" fill="currentColor" viewbox="0 0 24 24">
<path d="M12 .5C5.73.5.75 5.6.75 12.1c0 5.2 3.44 9.62 8.2 11.18.6.12.82-.27.82-.58v-2.1c-3.34.75-4.04-1.67-4.04-1.67-.55-1.45-1.34-1.84-1.34-1.84-1.1-.78.08-.76.08-.76 1.22.09 1.86 1.3 1.86 1.3 1.08 1.91 2.84 1.36 3.53 1.04.11-.81.42-1.36.76-1.67-2.66-.31-5.46-1.37-5.46-6.1 0-1.35.46-2.45 1.22-3.31-.12-.31-.53-1.57.12-3.27 0 0 1.01-.33 3.3 1.26.96-.27 1.98-.4 3-.4 1.02 0 2.05.14 3 .4 2.28-1.59 3.29-1.26 3.29-1.26.65 1.7.24 2.96.12 3.27.76.86 1.22 1.96 1.22 3.31 0 4.75-2.81 5.78-5.48 6.09.43.39.81 1.1.81 2.22v3.29c0 .32.22.7.83.58 4.76-1.56 8.19-5.98 8.19-11.18C23.25 5.6 18.27.5 12 .5z"></path>
</svg>
<span>GitHub</span>
</button>
<button class="btn linkBtn btnIcon" id="kkmSolutionsBtn" style="padding:9px 10px;border-radius:999px;display:none" title="KKM Solutions" type="button">
<svg aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M7 7h.01M17 7h.01M7 17h.01M17 17h.01"></path>
</svg><span>KKM Solutions</span></button>
<button class="btn linkBtn btnIcon" id="aboutBtn" style="padding:9px 10px;border-radius:999px" title="About" type="button"><svg aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg><span>About</span></button><button class="btn linkBtn btnIcon" id="versionBtn" style="padding:9px 10px;border-radius:999px" title="Version &amp; Changelog" type="button"><svg aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M9 12h6M9 16h6M14 2H7a2 2 0 00-2 2v16a2 2 0 002 2h10a2 2 0 002-2V8l-5-6z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg><span>Changelog</span></button></div></div>

<div class="controls">
<div class="searchWrap" id="searchWrap" style="position:relative">
<input class="input" id="search" placeholder="Search athlete name…"/>
<button aria-label="Clear search" class="linkBtn btnIcon" id="clearSearch" style="display:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:none;color:var(--muted);font-size:14px;font-weight:400;cursor:pointer;padding:0;line-height:1" type="button">x</button>
</div>
<div class="sortWrap" style="display:flex;align-items:center;gap:8px;margin-left:auto">
  <span class="small muted">Sort</span>
  <select class="input" id="sortSelect" style="width:210px">
    <option value="name">Name (A→Z)</option>
    <option value="score">Athletic Score (High→Low)</option>
    <option value="dash40">40yd (Fast→Slow)</option>
    <option value="broad">Broad Jump (High→Low)</option>
    <option value="shuttle">5-10-5 (Fast→Slow)</option>
    <option value="cone">3-Cone (Fast→Slow)</option>
    <option value="bench">Bench (High→Low)</option>
  </select>
</div>

<button class="btn drawerPrimary" id="toggleScout">Scout Mode: Off</button>
<button class="btn drawerPrimary" id="toggleCoach">Coach Mode: Off</button><span style="display:inline-flex;gap:8px;align-items:center;flex-wrap:wrap">
  <button class="btn drawerPrimary" id="toggleMedia">Media Mode: Off</button>
  <select id="mediaTemplateSelect" class="input" style="min-width:140px;padding:8px 10px">
    <option value="default">Default</option>
    <option value="kfl">KFL</option>
  </select>
</span>
<button class="btn drawerPrimary" id="unlockProBtn" type="button">Unlock Pro</button>
<label class="btn drawerPrimary" for="photos" id="photosLabel">Load Photos</label>
<input accept="image/*" id="photos" multiple="" style="display:none" type="file" webkitdirectory=""/>
<label class="btn drawerPrimary" for="file" id="csvLabel">Load CSV</label>
<input accept=".csv,text/csv" id="file" style="display:none" type="file"/>
<div class="controlsSpacer"></div>
<div class="controlsRight">
<button class="linkBtn btnIcon" id="exportCsvBtn" title="Download current CSV" type="button" style="display:none">
<svg aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v10m0 0l3-3m-3 3l-3-3M4 17v3h16v-3"></path>
</svg><span>Export</span></button>
<button aria-label="Open menu" class="linkBtn btnIcon" id="menuBtn" title="Menu" type="button"><svg aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg><span>Menu</span></button>




</div>
</div>
</div>
</header>
<!-- Mobile Drawer (responsive navbar) -->
<div aria-hidden="true" id="drawerOverlay"></div>
<aside aria-label="Menu drawer" id="navDrawer">
<div class="drawerHd">
<div class="drawerTitle">Menu</div>
<button class="btn" id="drawerCloseBtn" style="padding:8px 10px;border-radius:12px" type="button">Close</button>
</div>
<div class="drawerBody" id="drawerBody"></div>
</aside>
<div class="wrap">
<div class="row">
<!-- LEFT: Athlete list -->
<div class="card">
<div class="hd">
<div>
<div style="font-weight:800">Athletes</div>
<div class="small" id="athleteCount">0 loaded</div>
</div>
<button class="pill" id="watchCountPill" type="button" style="margin-right:6px;cursor:pointer;border:1px solid rgba(255,215,0,.25);background:rgba(255,215,0,.08);">☆ Watchlist: 0</button>
      <span class="pill" id="dataSourcePill" style="margin-right:6px">—</span><span class="pill" id="kflCombinePill" style="margin-right:6px;display:none">KFL Combine 2026</span><span class="pill" id="statusPill">No data</span>
</div>
<div class="bd">
<div class="drop" id="dropZone">
<div class="hint" id="defaultTip">
<strong>Tip:</strong> Load your <span class="mono">results.csv</span> (or any CSV) and optionally load an <strong>images folder</strong> named by <span class="mono">Formulario#</span> (e.g., <span class="mono">5.jpg</span>, <span class="mono">19.png</span>).
          </div>
<div class="hint" id="userTip" style="display:none"><strong>Tip:</strong> The results provide are a reflection of your best attempts during the combine tryouts.</div>
</div>
<div style="height:12px"></div>
<div class="athleteTableScroll" style="max-height:560px;overflow:auto;border:1px solid rgba(30,42,60,.9);border-radius:14px">
<table>
<thead>
<tr>
<th style="width:54%"><span class="thSort" data-sortcol="name" role="button" tabindex="0">Name<span class="thArrow" data-arrow-for="name"></span></span></th>
<th style="width:10%"><span class="thSort" data-sortcol="age" role="button" tabindex="0">Age<span class="thArrow" data-arrow-for="age"></span></span></th>
<th style="width:18%"><span class="thSort" data-sortcol="weight" role="button" tabindex="0">Weight<span class="thArrow" data-arrow-for="weight"></span></span></th>
<th style="width:18%">School</th>
</tr>
</thead>
<tbody id="athleteTable"></tbody>
</table>
</div>
</div>
</div>
<!-- RIGHT: Athlete details -->
<div class="card" id="detailCard">
<div class="hd">
<div>
<div id="athleteName" style="font-weight:800">Select an athlete</div>
<div class="small" id="athleteMeta">—</div>
</div>
<span class="pill" id="scorePill" style="display:none;margin-left:6px">Score —</span>
</div>
<div class="bd">
<div class="card" id="dashPhotoBlock" style="box-shadow:none;margin-bottom:12px">
<div class="hd" style="background:rgba(255,255,255,.02);display:flex;justify-content:space-between;align-items:center;gap:10px">
<div style="font-weight:800">Athlete Profile</div>
<div class="small muted">ID + position tag (auto-suggested)</div>
</div>
<div class="bd" style="display:grid;gap:10px;justify-items:center">
<div style="width:320px;max-width:100%;position:relative">
<!-- overlays -->
<div id="athleteIdBadge" style="position:absolute;top:10px;left:10px;z-index:2;
                          padding:8px 12px;border-radius:14px;
                          font-size:18px;font-weight:900;letter-spacing:.3px;
                          border:1px solid rgba(255,255,255,.18);
                          background:rgba(11,15,23,.55);
                          backdrop-filter: blur(8px);">
                #—
              </div>
<div id="athletePosBadge" style="position:absolute;top:10px;right:10px;z-index:2;
                          padding:8px 12px;border-radius:999px;
                          font-size:14px;font-weight:900;letter-spacing:.4px;
                          border:1px solid rgba(9,167,212,.35);
                          background:rgba(9,167,212,.18);
                          backdrop-filter: blur(8px);">
                —
              </div>
<!-- photo -->
<div id="athletePhotoLarge" style="width:320px;height:320px;border-radius:24px;
                          overflow:hidden;border:1px solid rgba(255,255,255,.15);
                          background:rgba(255,255,255,.04)">
<div style="height:100%;display:flex;align-items:center;justify-content:center;color:var(--muted)">No photo</div>
</div>
</div>
<div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center">
<span class="small muted">Position:</span>
<select class="input" id="posSelect" style="width:220px">
<option value="">Auto</option>
<option>QB</option><option>RB</option><option>WR</option><option>TE</option>
<option>OL</option><option>DL</option><option>LB</option><option>DB</option>
<option>K/P</option>
</select>
<button class="btn" id="posInfoBtn" style="padding:7px 10px;border-radius:999px">?</button>
<div id="posTooltip" style="display:none;max-width:520px;text-align:left;
                   padding:10px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);
                   background:rgba(11,15,23,.75);backdrop-filter: blur(10px)">
<div class="small muted" id="posExplain">—</div>
</div>
</div>
</div>
</div>
<div class="card" id="scoutPhotoBlock" style="box-shadow:none;margin-bottom:12px">
<div class="hd" style="background:rgba(255,255,255,.02)">
<div id="scoutProfileTitle" style="font-weight:800">Scout Profile</div>
            <button class="btn" id="watchBtn" style="margin-left:10px">☆ Watch</button>
<div class="small muted">Contact-ready info</div>
</div>
<div class="bd">
<div class="twoCol" style="grid-template-columns: 1fr 1fr">
<div style="position:relative;display:flex;justify-content:center">
<div id="athletePhotoScout" style="width:340px;height:340px;border-radius:24px;
                            overflow:hidden;border:1px solid rgba(255,255,255,.15);
                            background:rgba(255,255,255,.04)">
<div style="height:100%;display:flex;align-items:center;justify-content:center;color:var(--muted)">No photo</div>
</div>
<div id="athleteIdBadgeScout" style="position:absolute;top:12px;left:12px;z-index:2;
                            padding:8px 12px;border-radius:14px;
                            font-size:18px;font-weight:900;letter-spacing:.3px;
                            border:1px solid rgba(255,255,255,.18);
                            background:rgba(11,15,23,.55);
                            backdrop-filter: blur(8px);">
                  #—
                </div>
<div id="athletePosBadgeScout" style="position:absolute;top:12px;right:12px;z-index:2;
                            padding:8px 12px;border-radius:999px;
                            font-size:14px;font-weight:900;letter-spacing:.4px;
                            border:1px solid rgba(9,167,212,.35);
                            background:rgba(9,167,212,.18);
                            backdrop-filter: blur(8px);">
                  —
                </div>
</div>
<div class="contactCard">
<div style="font-weight:800;margin-bottom:10px">Contact details</div>
<div class="contactGrid">
<div class="contactItem">
<div class="label">DOB</div>
<div class="value" id="scoutDob">—</div>
</div>
<div class="contactItem" id="scoutAgeItem">
<div class="label">Age</div>
<div class="value" id="scoutAge">—</div>
</div>
<div class="contactItem">
<div class="label">Height</div>
<div class="value" id="scoutHeight">—</div>
</div>
<div class="contactItem">
<div class="label">Weight</div>
<div class="value" id="scoutWeight">—</div>
</div>
<div class="contactItem" id="scoutPhoneItem">
<div class="label">Phone</div>
<div class="value" id="scoutPhone">—</div>
</div>
<div class="contactItem" id="scoutEmailItem" style="grid-column:1/-1">
<div class="label">Email</div>
<div class="value" id="scoutEmail">—</div>
</div>
</div>
<div class="small muted" style="margin-top:10px">
                  Tip: take note of your preferred athlete to contact them on draft day.
                </div>
</div>
</div>
</div>
</div>
<div class="kpis" id="kpis"></div>
<div style="height:12px"></div>
<div class="twoCol" id="twoColWrap">
<div class="card" style="box-shadow:none">
<div class="hd" style="background:rgba(255,255,255,.02)">
<div style="font-weight:800">Performance Radar (percentiles)</div>
<div class="small muted">Times: lower is better • Dist/Reps: higher is better</div>
</div>
<div class="bd"><canvas id="radar"></canvas></div>
</div>

<div class="card" id="intelCard" style="box-shadow:none;margin-bottom:12px">
  <div class="hd" style="background:rgba(255,255,255,.02)">
    <div style="font-weight:800">Strengths & Flags</div>
    <div class="small muted">Auto-generated from percentiles</div>
  </div>
  <div class="bd">
    <div id="intelSummary" class="small" style="display:grid;grid-template-rows:auto auto;gap:12px">
      <div>
        <div style="font-weight:800;margin-bottom:6px">Strengths</div>
        <ul id="intelStrengths" style="margin:0 0 0 18px;padding:0"></ul>
      </div>
      <div>
        <div style="font-weight:800;margin-bottom:6px">Flags</div>
        <ul id="intelFlags" style="margin:0 0 0 18px;padding:0"></ul>
      </div>
    </div>
    <div style="margin-top:14px">
      <div style="font-weight:800;margin-bottom:6px">Notes</div>
      <textarea id="notesBox" class="input" rows="3" placeholder="Add notes for this athlete..." style="width:100%;resize:vertical"></textarea>
      <div class="small muted" id="notesSaved" style="margin-top:6px;display:none">Saved</div>
    </div>

  </div>
</div>
<div class="card" id="attemptsWrap" style="box-shadow:none">
<div class="hd" style="background:rgba(255,255,255,.02)">
<div style="font-weight:800">Attempts</div>
<div class="small muted">Best attempt used for ranking</div>
</div>
<div class="bd">
<div id="attempts"></div>
</div>
</div>
</div>
<div style="height:12px"></div>
<div class="card" id="barsWrap" style="box-shadow:none">
<div class="hd" style="background:rgba(255,255,255,.02)">
<div style="font-weight:800">Raw Metrics (best attempt)</div>
<div class="small muted">Quick visual of the athlete’s best values</div>
</div>
<div class="bd"><canvas id="bars"></canvas></div>
</div>
<div style="height:8px"></div>
<div class="hint">
<strong>Next step:</strong> After reviewing the data, shortlist your top athletes, compare them against your position benchmarks, write down follow‑up questions, and mark who you want to contact before draft day.</div>
</div>
</div>
</div>
</div>

<!-- Modals -->
<div id="modalOverlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);z-index:9999;align-items:center;justify-content:center;padding:18px">
<div id="modalBox" style="width:min(860px, 96vw);max-height:86vh;overflow:auto;background:rgba(18,26,39,.98);border:1px solid rgba(30,42,60,.9);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.5)">
<div style="display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 14px;border-bottom:1px solid rgba(30,42,60,.9)">
<div id="modalTitle" style="font-weight:900">Modal</div>
<button class="btn" id="modalClose" style="padding:8px 10px;border-radius:12px">Close</button>
</div>
<div id="modalContent" style="padding:14px"></div>
</div>
</div>
<script src="app.js?v=1.0.123c" defer></script>
</body>
</html>
